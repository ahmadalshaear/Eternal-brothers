<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Eternal Brothers FC</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
<style>
body {
    font-family: "Cairo", Arial, sans-serif;
    background-color: #121212;
    background-image: url('team-logo.jpg');
    background-repeat: no-repeat;
    background-position: center top;
    background-size: 200px;
    color: #e0e0e0;
    padding: 20px;
    text-align: center;
}
.container {
    max-width: 650px;
    margin: auto;
    background: #1e1e1ecc;
    padding: 35px 25px;
    border-radius: 15px;
    box-shadow: 0 0 15px #000;
    display: none;
}
h1 { font-size: 32px; color: #fff; margin-bottom: 15px; font-weight: 700; }
h2 { font-size: 24px; color: #fff; margin: 20px 0 10px; }
.match-time { font-weight: 600; color: #bbbbbb; margin-bottom: 25px; font-size: 18px; }
label { font-weight: 600; display: block; margin: 15px 0 10px 0; font-size: 18px; color: #fff; }
input[type=text] { padding: 12px; width: 75%; margin: 10px 0 20px 0; border-radius: 8px; border: 1px solid #555; text-align: center; font-size: 16px; background-color: #2c2c2c; color: #fff; }
button { padding: 12px 18px; border: none; background-color: #1976d2; color: white; border-radius: 8px; cursor: pointer; margin: 10px 8px; font-size: 16px; font-weight: 600; transition: 0.2s; }
button:hover { background-color: #0d47a1; }
ul { list-style: none; padding: 0; text-align: left; margin-top: 20px; }
li { background: #2c2c2c; margin: 10px 0; padding: 12px; border-radius: 8px; display: flex; justify-content: space-between; align-items: center; font-size: 16px; font-weight: 500; color: #e0e0e0; }
.actions button { background-color: #555; margin-left: 6px; padding: 6px 10px; font-size: 14px; color: #fff; }
.actions button:hover { background-color: #333; }
.nav-buttons { margin: 30px 0; }
.nav-buttons h3 { margin-bottom: 15px; font-size: 20px; font-weight: 600; color: #fff; }
</style>
</head>
<body>

<div class="nav-buttons">
    <button onclick="showSection('main')">üè† Main Team</button>
    <button onclick="showSection('blue')">üü¶ Blue Team</button>
    <button onclick="showSection('yellow')">üü® Yellow Team</button>
</div>

<!-- Main Team -->
<div id="main" class="container">
    <h1>‚öΩ Eternal Brothers FC ‚öΩ</h1>
    <div class="match-time">üóìÔ∏è Match will be on Sunday at 9:40 AM</div>
    <label>üìç Match Location:</label>
    <input type="text" id="matchLocation" placeholder="Enter location here" oninput="saveMatchLocation()">
    <input type="text" id="nameInput" placeholder="Enter your name">
    <button onclick="addMember()">Add</button>
    <h2>Main Team List (24 players max):</h2>
    <ul id="teamList"></ul>
    <h2>Waiting List:</h2>
    <ul id="waitingList"></ul>
</div>

<!-- Blue Team -->
<div id="blue" class="container">
    <h2>Blue Team üîµ</h2>
    <input type="text" id="blueInput" placeholder="Enter player name">
    <button onclick="addBlue()">Add</button>
    <ul id="blueList"></ul>
</div>

<!-- Yellow Team -->
<div id="yellow" class="container">
    <h2>Yellow Team üü°</h2>
    <input type="text" id="yellowInput" placeholder="Enter player name">
    <button onclick="addYellow()">Add</button>
    <ul id="yellowList"></ul>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc, updateDoc, onSnapshot } 
    from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyAPB2dHdpBwIvPBpkFlu9EbRwbdswV7i8",
  authDomain: "eternal-brothers-fc.firebaseapp.com",
  projectId: "eternal-brothers-fc",
  storageBucket: "eternal-brothers-fc.appspot.com",
  messagingSenderId: "884144294831",
  appId: "1:884144294831:web:8125177dcab873b3c77d5a",
  measurementId: "G-XZ7WX25BMG"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// Show/Hide Sections
function showSection(id){
    document.querySelectorAll('.container').forEach(c => c.style.display = 'none');
    document.getElementById(id).style.display = 'block';
}
showSection('main');

const maxTeamSize = 24;
const maxBlue = 12;
const maxYellow = 12;

const teamListEl = document.getElementById('teamList');
const waitingListEl = document.getElementById('waitingList');
const locationInput = document.getElementById('matchLocation');

async function saveMatchLocation(){
    await addDoc(collection(db,"matchInfo"),{type:"location", value: locationInput.value});
}

async function addMember(){
    const name = document.getElementById('nameInput').value.trim();
    if(!name) return alert("‚ö†Ô∏è Name cannot be empty!");
    const snap = await getDocs(collection(db,"mainTeam"));
    const count = snap.size;
    await addDoc(collection(db, count < maxTeamSize ? "mainTeam" : "waiting"), {name});
    document.getElementById('nameInput').value="";
}

async function addBlue(){
    const name = document.getElementById('blueInput').value.trim();
    if(!name) return alert("‚ö†Ô∏è Name cannot be empty!");
    const snap = await getDocs(collection(db,"blueTeam"));
    if(snap.size >= maxBlue) return alert("‚ö†Ô∏è Team full!");
    await addDoc(collection(db,"blueTeam"), {name});
    document.getElementById('blueInput').value="";
}

async function addYellow(){
    const name = document.getElementById('yellowInput').value.trim();
    if(!name) return alert("‚ö†Ô∏è Name cannot be empty!");
    const snap = await getDocs(collection(db,"yellowTeam"));
    if(snap.size >= maxYellow) return alert("‚ö†Ô∏è Team full!");
    await addDoc(collection(db,"yellowTeam"), {name});
    document.getElementById('yellowInput').value="";
}

async function editDoc(collectionName,id){
    const newName = prompt("Enter new name:");
    if(!newName) return;
    await updateDoc(doc(db,collectionName,id), {name:newName});
}

async function deleteDocById(collectionName,id){
    if(!confirm("Are you sure?")) return;

    if(collectionName === "mainTeam"){
        await deleteDoc(doc(db,"mainTeam",id));
        const waitingSnap = await getDocs(collection(db,"waiting"));
        if(waitingSnap.size > 0){
            const firstWaiting = waitingSnap.docs[0];
            await addDoc(collection(db,"mainTeam"), {name:firstWaiting.data().name});
            await deleteDoc(doc(db,"waiting",firstWaiting.id));
            alert(`üëü ${firstWaiting.data().name} moved from Waiting List to Main Team`);
        }
        return;
    }

    await deleteDoc(doc(db,collectionName,id));
}

function renderList(ulEl, data, collectionName){
    ulEl.innerHTML = "";
    data.forEach((docSnap, i) => {
        const li = document.createElement('li');
        li.innerHTML = `<span>${i+1}. ${docSnap.data().name}</span>
                        <div class="actions">
                            <button onclick="editDoc('${collectionName}','${docSnap.id}')">‚úèÔ∏è</button>
                            <button onclick="deleteDocById('${collectionName}','${docSnap.id}')">üóëÔ∏è</button>
                        </div>`;
        ulEl.appendChild(li);
    });
}

onSnapshot(collection(db,"mainTeam"), snap => renderList(teamListEl,snap.docs,"mainTeam"));
onSnapshot(collection(db,"waiting"), snap => renderList(waitingListEl,snap.docs,"waiting"));
onSnapshot(collection(db,"blueTeam"), snap => renderList(document.getElementById('blueList'),snap.docs,"blueTeam"));
onSnapshot(collection(db,"yellowTeam"), snap => renderList(document.getElementById('yellowList'),snap.docs,"yellowTeam"));
</script>
</body>
</html>
