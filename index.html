<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Eternal Brothers FC</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">

<!-- Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ù…Ù„Ù Firebase Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ -->
<script src="firebase-config.js"></script>
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js";
  import { getDatabase, ref, push, onValue } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-database.js";

  // ØªÙ‡ÙŠØ¦Ø© Firebase
  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  // Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Realtime Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Firebase
  let chatEnabled = false;
  let chatNameGlobal = "";

  function enableChat() {
    const name = document.getElementById('chatName').value.trim();
    if(!name) return alert("Please enter your name");
    chatEnabled = true;
    chatNameGlobal = name;
    document.getElementById('chatInput').disabled = false;
    document.getElementById('sendBtn').disabled = false;
  }

  function sendMessage() {
    if(!chatEnabled) return alert("Enable chat first");
    const text = document.getElementById('chatInput').value.trim();
    if(!text) return;
    push(ref(db,'messages'), {name: chatNameGlobal, text: text, time: Date.now()});
    document.getElementById('chatInput').value = "";
    document.getElementById('sendSound').play();
  }

  function clearChat() {
    if(!confirm("Clear chat?")) return;
    // Ù…Ø³Ø­ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ ÙÙŠ Firebase: (Ù…Ù„Ø§Ø­Ø¸Ø©: ÙŠØ­ØªØ§Ø¬ ØµÙ„Ø§Ø­ÙŠØ§Øª Database Rules)
    push(ref(db, 'messages'), {systemClear: true, time: Date.now()});
  }

  // Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„Ø±Ø³Ø§Ø¦Ù„
  const chatBox = document.getElementById('chatBox');
  onValue(ref(db,'messages'), (snapshot)=>{
    const data = snapshot.val();
    chatBox.innerHTML = "";
    for(let key in data){
      const msg = data[key];
      if(msg.systemClear){
        chatBox.innerHTML = "";
        continue;
      }
      const div = document.createElement('div');
      const time = new Date(msg.time).toLocaleString('en-US',{hour12:true});
      div.innerHTML = `<span style="color:blue">${msg.name}</span>: ${msg.text} <span class="message-time">(${time})</span>`;
      div.style.padding='4px 2px';
      chatBox.appendChild(div);
    }
    chatBox.scrollTop = chatBox.scrollHeight;
  });

  document.getElementById('chatInput').addEventListener("keypress",function(e){
    if(e.key==="Enter") sendMessage();
  });
  document.getElementById('chatName').addEventListener("keypress",function(e){
    if(e.key==="Enter") enableChat();
  });
</script>

<style>
/* ====== ÙƒÙ„ CSS Ø§Ù„Ø³Ø§Ø¨Ù‚ ÙƒÙ…Ø§ Ù‡Ùˆ ====== */
body {
  font-family: "Cairo", Arial, sans-serif;
  background-color: #121212;
  color: #e0e0e0;
  padding: 10px;
  text-align: center;
  margin:0;
}
.nav-buttons { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
button { padding: 10px 16px; border: none; font-weight: 700; font-size: 15px; border-radius: 8px; cursor: pointer; width: 30%; max-width: 130px; }
#homeBtn { background:#d32f2f; color:#fff; }
#blueBtn { background:#1976d2; color:#fff; }
#yellowBtn { background:#fbc02d; color:#000; }
.container { max-width: 95%; margin: auto; background: #1e1e1ecc; padding: 20px 10px; border-radius: 15px; box-shadow: 0 0 10px #000; display: none; }
h1 { font-size: 20px; color: #d32f2f; margin-bottom: 5px; font-weight:bold; }
h1::before, h1::after { content: "âš½"; margin: 0 6px; }
h2 { font-size: 20px; color: #fff; margin: 15px 0 8px; }
input[type=text], input[type=time] { padding: 10px; width: 80%; margin: 8px 0; border-radius: 8px; border: 1px solid #555; text-align: center; font-size: 15px; background-color: #2c2c2c; color: #fff; }
button.addBtn { padding: 8px 14px; margin: 6px; font-size: 14px; }
ul { list-style: none; padding: 0; text-align: left; margin-top: 10px; font-weight: bold; font-family: "Arial Black", Arial, sans-serif; }
li { margin: 6px 0; padding: 8px; border-radius: 12px; font-size: 15px; display:flex; justify-content: space-between; align-items: center; }
#teamList li { background: #a8e6a1; color:black; }
#waitingList li { background: #ffe0e0; color:black; }
#blueList li { background: rgba(25,118,210,0.7); color:black; }
#yellowList li { background: rgba(251,192,42,0.7); color:black; }
#chatBox { max-height: 300px; overflow-y: auto; background: #2c2c2c; padding: 10px; border-radius: 8px; margin-bottom: 10px; text-align: left; }
.message-time { font-size: 12px; color: #aaa; margin-left: 6px; }
/* ====== Ø¨Ø§Ù‚ÙŠ CSS Ø§Ù„Ø³Ø§Ø¨Ù‚ (Ø§Ù„Ù…Ù„Ø§Ø¹Ø¨ØŒ Ø§Ù„Ø¹Ù„Ø§Ù…Ø§ØªØŒ Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø§Ù„Ù‡ÙˆØ§ØªÙ...) ====== */
</style>
</head>
<body>

<div class="nav-buttons">
  <button id="blueBtn" onclick="showSection('blue')">Blue</button>
  <button id="homeBtn" onclick="showSection('main')">Home</button>
  <button id="yellowBtn" onclick="showSection('yellow')">Yellow</button>
</div>

<div id="main" class="container">
  <h1>Eternal Brothers FC</h1>
  <div class="address-container">
    <span class="address-pin">ğŸ“</span>
    <span id="matchAddress">Click here to set match address</span>
  </div>
  <div class="match-time">âœ”ï¸ The match will be on Sunday at 9:40 AM</div>
  <div class="match-note">Please follow the group chat in case of any changes</div>

  <h2>Add Player to Main Team</h2>
  <input type="text" id="nameInput" placeholder="Enter player name">
  <button class="addBtn" onclick="addMember()">Add</button>

  <h2>Main Team List (24 players max)</h2>
  <ul id="teamList"></ul>

  <h2>Waiting List</h2>
  <ul id="waitingList"></ul>

  <h2>Team Chat</h2>
  <input type="text" id="chatName" placeholder="Enter your name to enable chat">
  <button class="addBtn" onclick="enableChat()">âœ”ï¸ Confirm</button>
  <div id="chatBox"></div>
  <input type="text" id="chatInput" placeholder="Type your message..." style="width:80%;" disabled>
  <button class="addBtn" id="sendBtn" onclick="sendMessage()" disabled style="background:green;">Send</button>
  <button class="addBtn" style="background:#d32f2f; font-size:12px;" onclick="clearChat()">Clear Chat</button>
</div>

<!-- Blue & Yellow Sections (ÙƒÙ…Ø§ Ù‡ÙŠ) -->
<div id="blue" class="container" style="background:#1565c0aa;">
  <h2>Blue Team ğŸ”µ</h2>
  <input type="text" id="blueInput" placeholder="Enter player name">
  <button class="addBtn" onclick="addBlue()">Add</button>
  <ul id="blueList"></ul>
  <h3>Blue Team Plan</h3>
  <div id="bluePlan" class="field"></div>
  <button class="addBtn" id="blueMusicBtn" style="background:#1976d2; color:#fff;">Play/Pause Blue Music</button>
</div>

<div id="yellow" class="container" style="background:#fdd835aa; color:#000;">
  <h2>Yellow Team ğŸŸ¡</h2>
  <input type="text" id="yellowInput" placeholder="Enter player name">
  <button class="addBtn" onclick="addYellow()">Add</button>
  <ul id="yellowList"></ul>
  <h3>Yellow Team Plan</h3>
  <div id="yellowPlan" class="field"></div>
  <button class="addBtn" id="yellowMusicBtn" style="background:#fbc02d; color:#000;">Play/Pause Yellow Music</button>
</div>

<!-- Audio -->
<audio id="sendSound" src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg"></audio>
<audio id="alarmSound" src="https://actions.google.com/sounds/v1/alarms/alarm_clock.ogg"></audio>
<audio id="blueMusic" src="https://sndup.net/vwpb8" loop></audio>
<audio id="yellowMusic" src="https://sndup.net/vwpb8" loop></audio>

<script>
// ====== ÙƒÙ„ JS Ø§Ù„Ø³Ø§Ø¨Ù‚ (Navigation, Teams, Plans, LocalStorage) ÙƒÙ…Ø§ Ù‡Ùˆ ======
let currentTeamMusic = null;
function showSection(id){
  document.querySelectorAll('.container').forEach(c=>c.style.display='none');
  const section = document.getElementById(id);
  if(section) section.style.display='block';
  document.body.style.background = (id==="blue") ? "#0d47a1" : (id==="yellow") ? "#fff176" : "#121212";
  document.body.style.color = (id==="yellow") ? "#000" : "#e0e0e0";
  if(currentTeamMusic) currentTeamMusic.pause();
  if(id==="blue") currentTeamMusic=document.getElementById('blueMusic');
  else if(id==="yellow") currentTeamMusic=document.getElementById('yellowMusic');
  else currentTeamMusic=null;
  if(currentTeamMusic) currentTeamMusic.play();
}
showSection('main');

document.getElementById('blueMusicBtn').addEventListener('click', ()=>{
  const music=document.getElementById('blueMusic');
  if(music.paused) music.play(); else music.pause();
});
document.getElementById('yellowMusicBtn').addEventListener('click', ()=>{
  const music=document.getElementById('yellowMusic');
  if(music.paused) music.play(); else music.pause();
});

// ====== Ø¨Ø§Ù‚ÙŠ JS Ù„Ù„ÙØ±Ù‚ØŒ Ø§Ù„Ù‚ÙˆØ§Ø¦Ù…ØŒ Editable Match AddressØŒ Draggable Plan ÙƒÙ…Ø§ Ù‡Ùˆ ======

// Ù„Ø§Ø­Ù‚Ù‹Ø§ ÙŠÙ…ÙƒÙ† Ø¯Ù…Ø¬ renderAll(), addMember(), addBlue(), addYellow() Ù…Ø¹ LocalStorage
</script>

</body>
</html>
